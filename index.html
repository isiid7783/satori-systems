<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>OK</title>
<style>
html, body {
margin: 0;
padding: 0;
height: 100%;
background: black;
color: white;
display: flex;
align-items: center;
justify-content: center;
font-family: monospace;
}
</style>
</head>

<body>
<div id="btn">tap to begin</div>

<script>
const btn = document.getElementById("btn");

btn.onclick = async () => {
// iOS Safari 用の権限取得（クリック直結）
if (
typeof DeviceMotionEvent !== "undefined" &&
typeof DeviceMotionEvent.requestPermission === "function"
) {
const res = await DeviceMotionEvent.requestPermission();
if (res !== "granted") {
btn.textContent = "permission denied";
return;
}
}

btn.textContent = "running";

// センサーが実際に動いていることを可視化
window.addEventListener("devicemotion", e => {
const a = e.accelerationIncludingGravity;
if (!a) return;
btn.textContent =
(Math.abs(a.x) + Math.abs(a.y) + Math.abs(a.z)).toFixed(2);
});
};
</script>
</body>
</html>
